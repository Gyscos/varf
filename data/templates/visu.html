<html>
	<head>
		<title>Varf: {{title}}/{{name}}</title>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.css" rel="stylesheet" type="text/css">

		<style>
a {
	color: #666;
	text-decoration: none;
}

a:hover {
	color: black;
	text-decoration: none;
}

.attribute_list {
	float: left;
	overflow: auto;
	height: 100%;
	width: 400px;
}

.attribute_row {
	width: 90%;
	margin-top: 5px;
	margin-bottom: 5px;
	padding-top: 3px;
	padding-bottom: 3px;
	text-align: center;
	background: #eee;
}

.graph {
	overflow: auto;
	height: 100%;
}
		</style>
	</head>
	<body>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
		<div class="attribute_list">
			{{#each attributes}}
			<div class="attribute_row">
			<a href="/?att_id={{@index}}">{{.}}</a>
			</div>
			{{/each}}
		</div>
		<div class="graph">
			<h1>{{title}} / {{name}}</h1>
			<div id="chart"></div>

			<script>

var id0 = {{#if numeric}}1{{else}}0{{/if}};
var id1 = {{#if numeric}}2{{else}}1{{/if}};
var rows = [];
var labels = [];
{{#if numeric}}
labels.push('x');
{{/if}}
labels.push('0');
labels.push('1');
labels.push('% of 1');

rows.push(labels);

var row;
{{#each samples}}

row = [];

{{#if ../numeric}}
row.push("{{label}}");
{{/if}}

{{#each slices}}
row.push({{.}}.length);
{{/each}}

row.push(row[id1]/(row[id1]+row[id0]));

rows.push(row);

{{/each}}

var chart = c3.generate({
	padding: { top: 10, },
	bindto: '#chart',
	data: {
		{{#if numeric}}
		x: 'x',
		{{/if}}
		rows: rows,
		types: {
			{{#if numeric}}
			'0': 'area',
			'1': 'area',
			{{else}}
			'0': 'bar',
			'1': 'bar',
			{{/if}}
		},
		axes: {
			'% of 1': 'y2'
		},

		groups: [['0', '1']]
	},
	axis: {
		y2: {
			padding: {bottom: 0, top: 10},
			min: 0,
			max: 1,
			show: true,
		},
		{{#if numeric}}
		{{else}}
		x: {
			type: 'category',
			categories: [
			{{#each samples}}
				'{{label}}',
			{{/each}}
			]
		},
		{{/if}}
	},
});

			</script>
		</div>
	</body>
</html>

